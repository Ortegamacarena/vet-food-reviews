---
import articlesData from '@/data/articles.json';

const featuredArticles = articlesData.filter(article => article.featured).slice(0, 4);
---

<section class="py-20 bg-background">
  <div class="container">
    <div class="flex flex-col md:flex-row md:items-end justify-between mb-12">
      <div>
        <span class="text-primary font-medium text-sm uppercase tracking-wider mb-2 block">
          Destacados
        </span>
        <h2 class="text-3xl md:text-4xl font-heading font-bold">
          Reviews Populares
        </h2>
        <p class="text-muted-foreground mt-2 max-w-xl">
          Los an√°lisis m√°s completos y consultados por nuestra comunidad de amantes de las mascotas.
        </p>
      </div>
      <a href="/articulos" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-semibold ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border-2 border-primary bg-transparent text-primary hover:bg-primary hover:text-primary-foreground h-11 px-5 py-2 mt-4 md:mt-0">
        Ver todos
        <svg class="h-4 w-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
      </a>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
      {featuredArticles.map((article) => (
        <article class="group">
          <a href={`/analisis/${article.slug}`}>
            <div class="bg-card rounded-2xl overflow-hidden card-hover border border-border">
              <div class="relative h-48 bg-gradient-to-br from-primary/10 to-accent/10 flex items-center justify-center">
                <span class="text-7xl group-hover:scale-110 transition-transform duration-300">
                  {article.image}
                </span>
                <div class="absolute top-4 left-4">
                  <span class={`inline-flex items-center gap-1 rounded-full font-medium text-sm px-3 py-1 ${
                    article.petType === 'perro' ? 'bg-dog-light text-dog' : 'bg-cat-light text-cat'
                  }`}>
                    <span>{article.petType === 'perro' ? 'üêï' : 'üêà'}</span>
                    <span class="capitalize">{article.petType}</span>
                  </span>
                </div>
                <div class="absolute top-4 right-4">
                  <span class="bg-background/90 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-medium text-muted-foreground">
                    {article.category}
                  </span>
                </div>
              </div>

              <div class="p-5">
                <div class="flex items-center justify-between mb-3">
                  <div class="flex items-center gap-1">
                    {Array.from({ length: 5 }).map((_, i) => (
                      <svg key={i} class={`h-3 w-3 ${i < Math.floor(article.rating) ? 'text-rating-star fill-rating-star' : 'text-muted-foreground/30'}`} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
                    ))}
                    <span class="font-semibold text-foreground ml-1 text-sm">{article.rating.toFixed(1)}</span>
                  </div>
                  <span class="flex items-center gap-1 text-xs text-muted-foreground">
                    <svg class="h-3 w-3" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                    {article.readTime} min
                  </span>
                </div>

                <h3 class="font-heading font-semibold text-lg mb-2 group-hover:text-primary transition-colors line-clamp-2">
                  {article.title}
                </h3>

                <p class="text-sm text-muted-foreground line-clamp-2 mb-4">
                  {article.excerpt}
                </p>

                <span class="inline-flex items-center gap-1 text-sm font-medium text-primary group-hover:gap-2 transition-all">
                  Leer an√°lisis
                  <svg class="h-4 w-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
                </span>
              </div>
            </div>
          </a>
        </article>
      ))}
    </div>
  </div>
</section>
