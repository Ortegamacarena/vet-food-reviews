---
const currentPath = Astro.url.pathname;

const navLinks = [
  { href: "/", label: "Inicio" },
  { href: "/articulos", label: "Reviews" },
  { href: "/marcas", label: "Marcas" },
  { href: "/razas", label: "Razas" },
  { href: "/autor", label: "Sobre MÃ­" },
];

function isActive(href: string) {
  if (href === "/") return currentPath === "/";
  return currentPath.startsWith(href);
}
---

<header class="sticky top-0 z-50 glass-effect">
  <div class="container flex h-16 items-center justify-between">
    <a href="/" class="flex items-center gap-2 group">
      <div class="relative">
        <svg class="h-8 w-8 text-primary transition-transform duration-300 group-hover:scale-110 group-hover:rotate-12" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="4" r="2"/><circle cx="18" cy="8" r="2"/><circle cx="20" cy="16" r="2"/><path d="M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z"/></svg>
        <div class="absolute -top-1 -right-1 h-3 w-3 rounded-full bg-accent animate-pulse"></div>
      </div>
      <span class="font-heading text-xl font-bold">
        <span class="text-primary">Pet</span>
        <span class="text-accent">Food</span>
        <span class="text-foreground"> Expert</span>
      </span>
    </a>

    <nav class="hidden md:flex items-center gap-1">
      {navLinks.map((link) => (
        <a
          href={link.href}
          class={`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${
            isActive(link.href)
              ? 'bg-primary/10 text-primary'
              : 'text-muted-foreground hover:text-foreground hover:bg-muted'
          }`}
        >
          {link.label}
        </a>
      ))}
    </nav>

    <button id="mobile-menu-btn" class="md:hidden p-2 rounded-lg hover:bg-muted" aria-label="Toggle menu">
      <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>
    </button>
  </div>

  <nav id="mobile-menu" class="hidden md:hidden border-t border-border bg-background">
    <div class="container py-4 flex flex-col gap-2">
      {navLinks.map((link) => (
        <a
          href={link.href}
          class={`px-4 py-3 rounded-lg font-medium transition-all duration-200 ${
            isActive(link.href)
              ? 'bg-primary/10 text-primary'
              : 'text-muted-foreground hover:text-foreground hover:bg-muted'
          }`}
        >
          {link.label}
        </a>
      ))}
    </div>
  </nav>
</header>

<script>
  const btn = document.getElementById('mobile-menu-btn');
  const menu = document.getElementById('mobile-menu');

  btn?.addEventListener('click', () => {
    menu?.classList.toggle('hidden');
  });
</script>
